<!-- =============================================== -->
<!-- REPLACE templates/departments/create.html -->
<!-- =============================================== -->

{% extends "base.html" %}

{% block title %}Create Department - LMS{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">
                <i class="fas fa-building"></i>
                Create New Department
            </h1>
            <div class="header-actions">
                <a href="{{ url_for('departments') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    Back to Departments
                </a>
            </div>
        </div>
    </div>

    <div class="create-department-container">
        <form method="POST" id="createDepartmentForm">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-info-circle"></i>
                        Basic Information
                    </h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label class="form-label required">
                            <i class="fas fa-signature"></i>
                            Department Name
                        </label>
                        <input type="text" 
                               name="name" 
                               class="form-control" 
                               required 
                               placeholder="e.g., Mathematics Department, K12 Department"
                               autofocus>
                        <small class="form-text">Full name of the department</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required">
                            <i class="fas fa-hashtag"></i>
                            Department Code
                        </label>
                        <input type="text" 
                               name="code" 
                               class="form-control" 
                               required 
                               pattern="[A-Z0-9_-]{2,10}" 
                               title="2-10 characters, uppercase letters, numbers, hyphens and underscores only"
                               placeholder="e.g., MATH, K12, CS101, SIT"
                               style="text-transform: uppercase;">
                        <small class="form-text">Short unique code to identify the department (2-10 characters)</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-align-left"></i>
                            Description
                        </label>
                        <textarea name="description" 
                                  class="form-control" 
                                  rows="4" 
                                  placeholder="Brief description of the department's purpose and activities..."></textarea>
                        <small class="form-text">Optional description of the department</small>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-cogs"></i>
                        Settings
                    </h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="is_active" id="isActive" checked>
                            <label class="form-check-label" for="isActive">
                                <strong>Active Department</strong>
                            </label>
                        </div>
                        <small class="form-text">Inactive departments won't be available for user assignment</small>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i>
                    Create Department
                </button>
                <a href="{{ url_for('departments') }}" class="btn btn-secondary btn-lg">
                    <i class="fas fa-times"></i>
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<style>
.page-container {
    padding: 32px;
    max-width: 800px;
    margin: 0 auto;
}

.page-header {
    margin-bottom: 32px;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.page-title {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 12px;
}

.page-title i {
    color: var(--primary-color);
}

.create-department-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    overflow: hidden;
}

.card-header {
    background: #f8f9fa;
    padding: 20px 24px;
    border-bottom: 1px solid #e9ecef;
}

.card-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.card-title i {
    color: var(--primary-color);
}

.card-body {
    padding: 24px;
}

.form-group {
    margin-bottom: 24px;
}

.form-label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.form-label.required::after {
    content: '*';
    color: #dc3545;
    margin-left: 4px;
}

.form-control {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.2s ease;
}

.form-control:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(241, 161, 80, 0.1);
}

.form-text {
    display: block;
    margin-top: 6px;
    font-size: 12px;
    color: #6c757d;
}

.form-check {
    display: flex;
    align-items: center;
    gap: 12px;
}

.form-check-input {
    margin: 0;
}

.form-check-label {
    font-weight: 500;
    margin: 0;
}

.form-actions {
    display: flex;
    gap: 16px;
    justify-content: flex-end;
    padding: 24px 0;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-lg {
    padding: 16px 32px;
    font-size: 16px;
}

.btn-primary {
    background: linear-gradient(45deg, #F1A150, #C86706);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(200, 103, 6, 0.3);
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

@media (max-width: 768px) {
    .page-container {
        padding: 20px;
    }
    
    .header-content {
        flex-direction: column;
        gap: 16px;
        align-items: flex-start;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('createDepartmentForm');
    const codeInput = document.querySelector('input[name="code"]');
    
    // Auto-uppercase department code
    codeInput.addEventListener('input', function() {
        this.value = this.value.toUpperCase();
    });
    
    // Form validation
    form.addEventListener('submit', function(e) {
        const name = document.querySelector('input[name="name"]').value.trim();
        const code = codeInput.value.trim();
        
        if (!name) {
            e.preventDefault();
            alert('Please enter a department name.');
            return;
        }
        
        if (!code || code.length < 2) {
            e.preventDefault();
            alert('Please enter a valid department code (at least 2 characters).');
            return;
        }
        
        if (!/^[A-Z0-9_-]+$/.test(code)) {
            e.preventDefault();
            alert('Department code can only contain uppercase letters, numbers, hyphens, and underscores.');
            return;
        }
    });
});
</script>
{% endblock %}